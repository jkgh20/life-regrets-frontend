{"version":3,"sources":["Helper.js","About.js","ReadView.js","WriteView.js","App.js","index.js"],"names":["sleep","ms","Promise","resolve","setTimeout","LAMBDA_URL","FALLBACK_MESSAGES","About","props","Modal","size","className","Header","closeButton","Title","Body","ReadView","displayMessage","bind","setFallbackMessage","typeHeader","typeMessage","headerTyped","messageTyped","state","requests","message","messageFadeType","onFirstLoad","this","setState","data","sender","window","location","href","axios","post","then","response","undefined","count","Error","numberOfRegrets","retrievedMessage","setNumberOfRegrets","catch","randomMessage","Math","floor","random","length","Typed","headerText","strings","typeSpeed","backSpeed","cursorChar","onComplete","self","cursor","remove","destroy","options","setMessageFinished","messageText","id","ref","Button","variant","fMessageFinished","onClick","React","Component","WriteView","updateMessageInput","writeToDb","resetState","headerQuestion","messageInput","fadeType","event","target","value","inputMessage","trimmed","trim","split","max","map","x","toString","replace","Form","Control","as","rows","maxLength","placeholder","onChange","disabled","App","showModal","show","onHide","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"uRAAO,SAASA,EAAMC,GACpB,OAAO,IAAIC,SAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAASF,MAE7C,IAAMI,EAAa,8DACbC,EAAoB,CAC/B,iFACA,qEACA,oCACA,+E,wBCuCaC,MA5Cf,SAAeC,GACb,OACE,kBAACC,EAAA,EAAD,iBAAWD,EAAX,CAAkBE,KAAK,KAAKC,UAAU,gBACpC,kBAACF,EAAA,EAAMG,OAAP,CAAcC,aAAW,GACvB,kBAACJ,EAAA,EAAMK,MAAP,uBAKF,kBAACL,EAAA,EAAMM,KAAP,0OAIN,6BACA,6BALM,8VAU2B,kCAV3B,IAWN,6BACA,6BAZM,qRAiBN,6BACA,6BAlBM,8WAwBN,6BACA,6BAzBM,mCA0B0B,yCA1B1B,kM,mECiISC,E,kDArIb,WAAYR,GAAQ,IAAD,8BACjB,cAAMA,IAEDS,eAAiB,EAAKA,eAAeC,KAApB,gBACtB,EAAKC,mBAAqB,EAAKA,mBAAmBD,KAAxB,gBAC1B,EAAKE,WAAa,EAAKA,WAAWF,KAAhB,gBAClB,EAAKG,YAAc,EAAKA,YAAYH,KAAjB,gBAEnB,EAAKI,YAAc,KACnB,EAAKC,aAAe,KAEpB,EAAKC,MAAQ,CACXC,SAAU,EACVC,QAAS,GACTC,gBAAiB,UAdF,E,oGAkBEC,G,mFAEfC,KAAKL,MAAMC,SAAW,K,gBACxBI,KAAKC,SAAS,CAAEL,SAAUI,KAAKL,MAAMC,SAAW,IAE5CM,EAAO,CACTC,OAAQC,OAAOC,SAASC,MAG1BC,IAAMC,KAAN,UAAchC,EAAd,SAAiC0B,GAChCO,MAAK,SAAAC,GAEJ,QAA4BC,IAAxBD,EAASR,KAAKU,YAAiDD,IAA1BD,EAASR,KAAKL,QACrD,MAAM,IAAIgB,MAAM,gBAElB,IAAID,EAAQb,EAAcW,EAASR,KAAKU,MAAQ,EAAKjC,MAAMmC,gBACvDC,EAAmBL,EAASR,KAAKL,QAErC,EAAKlB,MAAMqC,mBAAmBJ,GAC9B,EAAKX,SAAS,CAAEJ,QAASkB,OAE1BE,OAAM,WACL,EAAK3B,wBACJmB,MAAK,WACN,GAAIV,EACF,OAAO5B,EAAM,SAEdsC,MAAK,WACN,EAAKjB,iB,0BAGPQ,KAAKV,sBACDS,E,kCACI5B,EAAM,M,QAEd6B,KAAKR,c,mJAKP,IAAI0B,EAAgBzC,EAAkB0C,KAAKC,MAAMD,KAAKE,SAAW5C,EAAkB6C,SACnFtB,KAAKC,SAAS,CAAEJ,QAASqB,M,mCAWzBlB,KAAKP,YAAc,IAAI8B,IAAMvB,KAAKwB,WAPlB,CACdC,QAAS,CAAC,sCAAuC,sBACjDC,UAAW,GACXC,UAAW,GACXC,WAAY,IACZC,WAAY,SAAAC,GAAI,OAAIA,EAAKC,OAAOC,c,oCAKrB,IAAD,OACc,OAAtBhC,KAAKN,cACPM,KAAKN,aAAauC,UAGpB,IAAMC,EAAU,CACdT,QAAS,CAACzB,KAAKL,MAAME,SACrB6B,UAAW,EACXC,UAAW,EACXC,WAAY,IACZC,WAAY,SAAAC,GACVA,EAAKC,OAAOC,SACZ,EAAKrD,MAAMwD,uBAGfnC,KAAKN,aAAe,IAAI6B,IAAMvB,KAAKoC,YAAaF,K,2JAIhDlC,KAAKT,a,SAGCpB,EAAM,K,cACZ6B,KAAKZ,gBAAe,G,SAGdjB,EAAM,M,OACZ6B,KAAKC,SAAS,CAAEH,gBAAiB,iB,mJAIjCE,KAAKP,YAAYwC,UACjBjC,KAAKN,aAAauC,Y,+BAGV,IAAD,OACP,OACE,yBAAKI,GAAG,QACN,wBAAIA,GAAG,SAASvD,UAAU,gBACxB,0BAAMwD,IAAK,SAAAd,GAAgB,EAAKA,WAAaA,MAE/C,yBAAKa,GAAG,eAAevD,UAAWkB,KAAKL,MAAMG,iBAC3C,0BAAMwC,IAAK,SAAAF,GAAiB,EAAKA,YAAcA,MAGjD,yBAAKtD,UAAU,aACb,yBAAKA,UAAU,cACb,kBAACyD,EAAA,EAAD,CACEC,QAAQ,YACR3D,KAAK,KACLC,UAAWkB,KAAKrB,MAAM8D,iBAAmB,mBAAqB,SAC9DC,QAAS,kBAAM,EAAKtD,gBAAe,KAJrC,uB,GAzHWuD,IAAMC,W,oBC6GdC,E,kDAtGb,WAAYlE,GAAQ,IAAD,8BACjB,cAAMA,IAEDmE,mBAAqB,EAAKA,mBAAmBzD,KAAxB,gBAC1B,EAAK0D,UAAY,EAAKA,UAAU1D,KAAf,gBACjB,EAAK2D,WAAa,EAAKA,WAAW3D,KAAhB,gBAElB,EAAKM,MAAQ,CACXC,SAAU,EACVqD,eAAgB,gBAChBC,aAAc,GACdC,SAAU,oBAXK,E,+DAeAC,GACjBpD,KAAKC,SAAS,CAAEiD,aAAcE,EAAMC,OAAOC,U,gCAGnCC,GAER,KAAIvD,KAAKL,MAAMC,SAAW,IAA1B,CAGAI,KAAKC,SAAS,CAAEL,SAAUI,KAAKL,MAAMC,SAAW,IAEhD,IAAI4D,EAAUD,EAAaE,OAE3B,KAAID,EAAQlC,OAAS,GAAKkC,EAAQlC,OAAS,KAA3C,CAIA,IAAIoC,EAAQF,EAAQE,MAAM,KAE1B,KAAIA,EAAMpC,OAAS,QAKfH,KAAKwC,IAAL,MAAAxC,KAAI,YAAQuC,EAAME,KAAI,SAAAC,GAAC,OAAIA,EAAEvC,YAAW,IAA5C,CAIA,IAAIpB,EAAO,CACTC,OAAQC,OAAOC,SAASC,KACxBT,QAAS2D,GAEXjD,IAAMC,KAAN,UAAchC,EAAd,UAAkC0B,GAC/Be,OAAM,oB,oJAITjB,KAAKC,SAAS,CAAEkD,SAAU,mB,SAEpBhF,EAAM,K,OAEZ6B,KAAKrB,MAAMqC,mBAAmBhB,KAAKrB,MAAMmC,gBAAkB,GAC3Dd,KAAKC,SAAS,CACZgD,eAAgB,eAChBC,aAAc,GACdC,SAAU,kB,qIAIJ,IAAD,OACP,OACE,yBAAKd,GAAG,aAAavD,UAAWkB,KAAKrB,MAAM8D,iBAAmBzC,KAAKL,MAAMwD,SAAW,UAClF,wBAAId,GAAG,UACarC,KAAKrB,MAAMmC,gBAxE5BgD,WAAWC,QAAQ,wBAAyB,KAuE/C,4BAC0E/D,KAAKL,MAAMsD,gBAGrF,kBAACe,EAAA,EAAKC,QAAN,CACEC,GAAG,WACHC,KAAK,IACLC,UAjFY,IAkFZC,YAAY,cACZf,MAAOtD,KAAKL,MAAMuD,aAClBb,GAAG,gBACHiC,SAAUtE,KAAK8C,qBAGjB,yBAAKhE,UAAU,aACb,yBAAKA,UAAU,aACZkB,KAAKL,MAAMuD,aAAa5B,OAD3B,IAzFY,IAyFZ,eAGA,yBAAKxC,UAAU,cACb,kBAACyD,EAAA,EAAD,CACEC,QAAQ,YACR3D,KAAK,KACL0F,SAAUvE,KAAKL,MAAMuD,aAAa5B,OAAS,EAC3CoB,QAAS,WACP,EAAKK,UAAU,EAAKpD,MAAMuD,cAC1B,EAAKF,eANT,e,GAvFYL,IAAMC,WCkDf4B,E,kDAvDb,WAAY7F,GAAQ,IAAD,8BACjB,cAAMA,IAEDqC,mBAAqB,EAAKA,mBAAmB3B,KAAxB,gBAC1B,EAAK8C,mBAAqB,EAAKA,mBAAmB9C,KAAxB,gBAE1B,EAAKM,MAAQ,CACXmB,gBAAiBrC,EAAkB6C,OACnCmB,kBAAkB,EAClBgC,WAAW,GATI,E,+DAaA7D,GACjBZ,KAAKC,SAAS,CAAEa,gBAAiBF,M,2CAIjCZ,KAAKC,SAAS,CAAEwC,kBAAkB,M,+BAG1B,IAAD,OACP,OACE,yBAAKJ,GAAG,YACN,kBAAC,EAAD,CACEvB,gBAAiBd,KAAKL,MAAMmB,gBAC5BE,mBAAoBhB,KAAKgB,mBAEzByB,iBAAkBzC,KAAKL,MAAM8C,iBAC7BN,mBAAoBnC,KAAKmC,qBAG3B,kBAAC,EAAD,CACErB,gBAAiBd,KAAKL,MAAMmB,gBAC5BE,mBAAoBhB,KAAKgB,mBAEzByB,iBAAkBzC,KAAKL,MAAM8C,mBAG/B,yBAAKJ,GAAG,QAAQvD,UAAWkB,KAAKL,MAAM8C,iBAAmB,mBAAqB,UAC5E,0BACEJ,GAAG,aACHK,QAAS,kBAAM,EAAKzC,SAAS,CAAEwE,WAAW,MAF5C,UAMF,kBAAC,EAAD,CACEC,KAAM1E,KAAKL,MAAM8E,UACjBE,OAAQ,kBAAM,EAAK1E,SAAS,CAAEwE,WAAW,Y,GAjDjC9B,IAAMC,W,cCDxBgC,EAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.ba67f5ea.chunk.js","sourcesContent":["export function sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n};\nexport const LAMBDA_URL = \"https://m8o1q7cin4.execute-api.us-east-2.amazonaws.com/prod\";\nexport const FALLBACK_MESSAGES = [\n  \"I regret playing the trombone for 8 years instead of learning piano or guitar.\",\n  \"I should have stuck with those piano lessons. Mom you were right!!\",\n  \"I regret not hugging my mom more.\",\n  \"I regret the coffee I just spilled on myself ü§¶‚Äç‚ôÇÔ∏è\"\n]\n","import Modal from 'react-bootstrap/Modal';\nimport React from 'react';\n\nfunction About(props) {\n  return (\n    <Modal {...props} size=\"md\" className=\"about-modal\">\n      <Modal.Header closeButton>\n        <Modal.Title>\n          Author's Note\n        </Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\nRegrets are a funny thing. They often paint a picture of one's wants and desires\nmoreso than asking that person directly. As one might come to read, some are\nwhimsical while others show a deep longing for a reality that isn't.\n<br />\n<br />\nRegrets often bring pain. Most of us have something we'd like to change about\nour lives. Some wish they didn't have this life at all. I believe the gnawing\nsense of having had and lost some intangible thing starts in adolescence, finds\nits peaks during adulthood, and finally quiets down when we not only know but\ndeeply understand that life just <em>is</em>.\n<br />\n<br />\nChances are, you the reader are living along these peaks. The point of this\njournal isn't to ruminate on these feelings, but rather to empathize, vent, let\ngo, and learn from each other. Truly learn to forgive yourself if you haven't\nyet - you didn't know what you know now.\n<br />\n<br />\nIn my own journey, I myself have come to believe that my feelings of\nregret stem not from my circumstances, but from who I am as a person - and I'm\nincredibly lucky to be able to say that. I'm realizing that even if I were given\na chance to start over, I would STILL have regrets and want to do it over again.\nCall this a personal moment of catharsis if you will.\n<br />\n<br />\nI do hope you'll walk away with <em>something</em> after reading a couple of\nthese entries. Some of the biggest moments of clarity can come from the most\nmundane moments. If you get the chance, call your family and give your ma a big\nhug.\n      </Modal.Body>\n    </Modal>\n  );\n}\n\nexport default About;\n","import './App.css';\nimport { sleep, FALLBACK_MESSAGES, LAMBDA_URL } from './Helper.js';\nimport axios from 'axios';\nimport Button from 'react-bootstrap/Button';\nimport React from 'react';\nimport Typed from 'typed.js';\n\nclass ReadView extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.displayMessage = this.displayMessage.bind(this);\n    this.setFallbackMessage = this.setFallbackMessage.bind(this);\n    this.typeHeader = this.typeHeader.bind(this);\n    this.typeMessage = this.typeMessage.bind(this);\n\n    this.headerTyped = null;\n    this.messageTyped = null;\n\n    this.state = {\n      requests: 0,\n      message: \"\",\n      messageFadeType: \"hidden\"\n    };\n  }\n\n  async displayMessage(onFirstLoad) {\n    // Each session can read at most 100 remote requests to prevent abuse\n    if (this.state.requests < 100) {\n      this.setState({ requests: this.state.requests + 1 });\n\n      let data = {\n        sender: window.location.href\n      }\n      // TODO: Can we send data with a get?\n      axios.post(`${LAMBDA_URL}/read`, data)\n      .then(response => {\n        // TODO: Refactor and check on status code\n        if (response.data.count === undefined || response.data.message === undefined) {\n          throw new Error('Bad response');;\n        }\n        let count = onFirstLoad ? response.data.count : this.props.numberOfRegrets;\n        let retrievedMessage = response.data.message;\n\n        this.props.setNumberOfRegrets(count);\n        this.setState({ message: retrievedMessage });\n      })\n      .catch(() => {\n        this.setFallbackMessage();\n      }).then(() => {\n        if (onFirstLoad) {\n          return sleep(2500);\n        }\n      }).then(() => {\n        this.typeMessage();\n      });\n    } else {\n      this.setFallbackMessage();\n      if (onFirstLoad) {\n        await sleep(2500);\n      }\n      this.typeMessage();\n    }\n  }\n\n  setFallbackMessage() {\n    let randomMessage = FALLBACK_MESSAGES[Math.floor(Math.random() * FALLBACK_MESSAGES.length)];\n    this.setState({ message: randomMessage });\n  }\n\n  typeHeader() {\n    const options = {\n      strings: ['Regrets.^1500 We all have them.^300', 'Someone regrets...'],\n      typeSpeed: 20,\n      backSpeed: 10,\n      cursorChar: '_',\n      onComplete: self => self.cursor.remove()\n    };\n    this.headerTyped = new Typed(this.headerText, options);\n  }\n\n  typeMessage() {\n    if (this.messageTyped !== null) {\n      this.messageTyped.destroy();\n    }\n\n    const options = {\n      strings: [this.state.message],\n      typeSpeed: 0,\n      backSpeed: 0,\n      cursorChar: '_',\n      onComplete: self => {\n        self.cursor.remove();\n        this.props.setMessageFinished();\n      }\n    };\n    this.messageTyped = new Typed(this.messageText, options);\n  }\n\n  async componentDidMount() {\n    this.typeHeader();\n\n    // Sleep for 2 seconds to prevent unnecessary queries on brief visits\n    await sleep(2000);\n    this.displayMessage(true);\n\n    // Fade in read message border\n    await sleep(1200);\n    this.setState({ messageFadeType: \"slow-fade-in\" });\n  }\n\n  componentWillUnmount() {\n    this.headerTyped.destroy();\n    this.messageTyped.destroy();\n  }\n\n  render() {\n    return (\n      <div id=\"read\">\n        <h1 id=\"header\" className=\"slow-fade-in\">\n          <span ref={headerText => { this.headerText = headerText; }} />\n        </h1>\n        <div id=\"read-message\" className={this.state.messageFadeType}>\n          <span ref={messageText => { this.messageText = messageText; }} />\n        </div>\n\n        <div className=\"container\">\n          <div className=\"flex-right\">\n            <Button\n              variant=\"secondary\"\n              size=\"sm\"\n              className={this.props.fMessageFinished ? \"fmessage-fade-in\" : \"hidden\"}\n              onClick={() => this.displayMessage(false)}\n            >Read Another</Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ReadView;\n","import './App.css';\nimport { sleep, LAMBDA_URL } from './Helper.js';\nimport axios from 'axios';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form'\nimport React from 'react';\n\nlet CHARACTER_LIMIT = 500;\n\nfunction numberWithCommas(x) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nclass WriteView extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.updateMessageInput = this.updateMessageInput.bind(this);\n    this.writeToDb = this.writeToDb.bind(this);\n    this.resetState = this.resetState.bind(this);\n\n    this.state = {\n      requests: 0,\n      headerQuestion: \"What's yours?\",\n      messageInput: \"\",\n      fadeType: \"fmessage-fade-in\"\n    };\n  }\n\n  updateMessageInput(event) {\n    this.setState({ messageInput: event.target.value, });\n  }\n\n  writeToDb(inputMessage) {\n    // Who is going to sit down and write 50 regrets in a single session?\n    if (this.state.requests > 50) {\n      return;\n    }\n    this.setState({ requests: this.state.requests + 1 });\n\n    let trimmed = inputMessage.trim();\n    // Can you really say anything meaninful in less than 3 characters?\n    if (trimmed.length < 3 || trimmed.length > 500) {\n      return;\n    }\n\n    let split = trimmed.split(\" \");\n    // Your entry can't be comprised solely of words 3 characters or less.\n    if (split.length > 125) {\n      return;\n    }\n\n    // Your entry can't have a word longer than 50 characters.\n    if (Math.max(...split.map(x => x.length)) > 50) {\n      return;\n    }\n\n    let data = {\n      sender: window.location.href,\n      message: trimmed\n    }\n    axios.post(`${LAMBDA_URL}/write`, data)\n      .catch(() => {});\n  }\n\n  async resetState() {\n    this.setState({ fadeType: \"quick-fade-out\" });\n\n    await sleep(500);\n\n    this.props.setNumberOfRegrets(this.props.numberOfRegrets + 1);\n    this.setState({\n      headerQuestion: \"Got another?\",\n      messageInput: \"\",\n      fadeType: \"quick-fade-in\"\n    });\n  }\n\n  render() {\n    return (\n      <div id=\"write-view\" className={this.props.fMessageFinished ? this.state.fadeType : \"hidden\"}>\n        <h1 id=\"header\">\n          {numberWithCommas(this.props.numberOfRegrets)} regrets and counting... {this.state.headerQuestion}\n        </h1>\n\n        <Form.Control\n          as=\"textarea\"\n          rows=\"7\"\n          maxLength={CHARACTER_LIMIT}\n          placeholder=\"I regret...\"\n          value={this.state.messageInput}\n          id=\"write-message\"\n          onChange={this.updateMessageInput}\n        />\n\n        <div className=\"container\">\n          <div className=\"flex-left\">\n            {this.state.messageInput.length}/{CHARACTER_LIMIT} characters\n          </div>\n          <div className=\"flex-right\">\n            <Button\n              variant=\"secondary\"\n              size=\"sm\"\n              disabled={this.state.messageInput.length < 1}\n              onClick={() => {\n                this.writeToDb(this.state.messageInput);\n                this.resetState();\n              }}\n              >Send</Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default WriteView;\n","import './App.css';\nimport { FALLBACK_MESSAGES } from './Helper.js';\nimport About from './About';\nimport React from 'react';\nimport ReadView from './ReadView';\nimport WriteView from './WriteView';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setNumberOfRegrets = this.setNumberOfRegrets.bind(this);\n    this.setMessageFinished = this.setMessageFinished.bind(this);\n\n    this.state = {\n      numberOfRegrets: FALLBACK_MESSAGES.length,\n      fMessageFinished: false,\n      showModal: false\n    };\n  }\n\n  setNumberOfRegrets(count) {\n    this.setState({ numberOfRegrets: count });\n  }\n\n  setMessageFinished() {\n    this.setState({ fMessageFinished: true });\n  }\n\n  render() {\n    return (\n      <div id=\"app-view\">\n        <ReadView\n          numberOfRegrets={this.state.numberOfRegrets}\n          setNumberOfRegrets={this.setNumberOfRegrets}\n\n          fMessageFinished={this.state.fMessageFinished}\n          setMessageFinished={this.setMessageFinished}\n        />\n\n        <WriteView\n          numberOfRegrets={this.state.numberOfRegrets}\n          setNumberOfRegrets={this.setNumberOfRegrets}\n\n          fMessageFinished={this.state.fMessageFinished}\n        />\n\n        <div id=\"about\" className={this.state.fMessageFinished ? \"fmessage-fade-in\" : \"hidden\"}>\n          <span\n            id=\"about-text\"\n            onClick={() => this.setState({ showModal: true })}\n          >About</span>\n        </div>\n\n        <About\n          show={this.state.showModal}\n          onHide={() => this.setState({ showModal: false })}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import './index.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}